import{j as e,t as he,T as P,P as o,r as h,S as R,I as pe,e as g,f as M,M as b,B as xe,s as me,w as fe,h as ge,W as je}from"./index-2645332a.js";import{g as ve,p as Se,d as be}from"./service-744be99f.js";import{T as w,d as j,D as H,a as W,b as z,G as k,c as L,E as we,e as ye,f as Ce,g as Te,h as ke,i as De,j as Pe,k as _e}from"./jspdf.plugin.autotable-9666bd39.js";import{T as I,O as Ee,I as Ne}from"./InputAdornment-472adb5f.js";import{B as v}from"./Button-c4b246cf.js";import{u as D,w as Ae}from"./xlsx-f5126985.js";import{C as Ie}from"./Container-b1a1dd66.js";import{C as Oe}from"./Card-2e36717f.js";import"./axios-9b9683dd.js";import"./Menu-58305863.js";import"./typeof-7fd5df1e.js";function q({query:n}){return e.jsx(w,{children:e.jsx(j,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(he,{sx:{textAlign:"center"},children:[e.jsx(P,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(P,{variant:"body2",children:["No results found for Â ",e.jsxs("strong",{children:['"',n,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}q.propTypes={query:o.string};const O={service_id:"",name:"",_id:""};function B({open:n,onClose:t,onSave:r,initialData:s,maxNumber:a}){const[l,c]=h.useState(O);h.useEffect(()=>{console.log(a),c(s?{...s}:{...O,service_id:a+1})},[s,a]);const m=p=>{const{name:x,value:f}=p.target;c({...l,[x]:f})},i=()=>{const p={...l};r(p),t()};return e.jsxs(H,{open:n,onClose:t,fullWidth:!0,children:[e.jsx(W,{sx:{bgcolor:"primary.main",color:"white"},children:s?"Edit Hotel":"New Hotel"}),e.jsx(z,{children:e.jsx(R,{spacing:3,children:e.jsxs(k,{container:!0,spacing:2,children:[e.jsx(k,{item:!0,xs:12,sm:12,children:e.jsx(I,{label:"Service No",name:"service_id",value:l.service_id,onChange:m,type:"number",fullWidth:!0,variant:"outlined"})}),e.jsx(k,{item:!0,xs:12,sm:12,children:e.jsx(I,{label:"Service Name",name:"name",value:l.name,onChange:m,fullWidth:!0,variant:"outlined"})})]})})}),e.jsxs(L,{children:[e.jsx(v,{onClick:t,color:"inherit",children:"Cancel"}),e.jsx(v,{onClick:i,variant:"contained",children:"Save"})]})]})}B.propTypes={open:o.bool,onClose:o.func,onSave:o.func,initialData:o.object,maxNumber:o.any};function K({id:n,name:t,service_id:r,editAction:s,deleteAction:a}){const[l,c]=h.useState(null),m=f=>{c(f.currentTarget)},i=()=>{c(null)},p=()=>{s(),c(null)},x=()=>{a(),c(null)};return e.jsxs(e.Fragment,{children:[e.jsxs(w,{hover:!0,tabIndex:-1,role:"checkbox",children:[e.jsx(j,{align:"center",children:r}),e.jsx(j,{align:"center",children:t}),e.jsx(j,{align:"right",children:e.jsx(pe,{onClick:m,children:e.jsx(g,{icon:"eva:more-vertical-fill"})})})]}),e.jsxs(M,{open:!!l,anchorEl:l,onClose:i,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:[e.jsxs(b,{onClick:p,children:[e.jsx(g,{icon:"eva:edit-fill",sx:{mr:2}}),"Edit"]}),e.jsxs(b,{onClick:x,sx:{color:"error.main"},children:[e.jsx(g,{icon:"eva:trash-2-outline",sx:{mr:2}}),"Delete"]})]})]})}K.propTypes={id:o.any,service_id:o.any,name:o.any,editAction:o.func,deleteAction:o.func};const Fe={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function Re(n,t,r){return n?Math.max(0,(1+n)*t-r):0}function F(n,t,r){return n[r]===null?1:t[r]===null||t[r]<n[r]?-1:t[r]>n[r]?1:0}function Me(n,t){return n==="desc"?(r,s)=>F(r,s,t):(r,s)=>-F(r,s,t)}function He({inputData:n,comparator:t,filterName:r}){const s=n.map((a,l)=>[a,l]);return s.sort((a,l)=>{const c=t(a[0],l[0]);return c!==0?c:a[1]-l[1]}),n=s.map(a=>a[0]),r&&(n=n.filter(a=>a.name.toLowerCase().indexOf(r.toLowerCase())!==-1)),n}const We=n=>{const t=D.book_new(),r=[["Service ID","Service Name"],...n.map(a=>[a.service_id,a.name])],s=D.aoa_to_sheet(r);D.book_append_sheet(t,s,"service"),Ae(t,`Services${Date.now()}.xlsx`)},ze=n=>{const t=new we({unit:"pt",format:[1500,600]}),r=[{header:"Service ID",dataKey:"service_id"},{header:"Service Name",dataKey:"name"}],s=n.map(a=>({service_id:a.service_id,name:a.name}));t.autoTable({head:[r.map(a=>a.header)],body:s.map(a=>r.map(l=>a[l.dataKey]))}),t.save(`Services${Date.now()}.pdf`)},Le=me(Ce)(({theme:n})=>({position:"sticky",top:0,backgroundColor:"#ddf4ff",zIndex:n.zIndex.appBar}));function U({order:n,orderBy:t,rowCount:r,headLabel:s,numSelected:a,onRequestSort:l,onSelectAllClick:c}){const m=i=>p=>{l(p,i)};return e.jsx(Le,{children:e.jsx(w,{children:s.map(i=>e.jsx(j,{align:i.align||"left",sortDirection:t===i.id?n:!1,sx:{width:i.width,minWidth:i.minWidth,backgroundColor:"#aaf4ff",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",padding:"4px",paddingTop:"10px",paddingBottom:"10px"},children:e.jsxs(ye,{hideSortIcon:!0,active:t===i.id,direction:t===i.id?n:"asc",onClick:m(i.id),children:[i.label,t===i.id?e.jsx(xe,{sx:{...Fe},children:n==="desc"?"sorted descending":"sorted ascending"}):null]})},i.id))})})}U.propTypes={order:o.oneOf(["asc","desc"]),orderBy:o.string,rowCount:o.number,headLabel:o.array,numSelected:o.number,onRequestSort:o.func,onSelectAllClick:o.func};function G({emptyRows:n,height:t}){return n?e.jsx(w,{sx:{...t&&{height:t*n}},children:e.jsx(j,{colSpan:9})}):null}G.propTypes={emptyRows:o.number,height:o.number};function $({filterName:n,onFilterName:t,onNewHotel:r,pdfAction:s,excelAction:a}){const[l,c]=h.useState(null),m=f=>{c(f.currentTarget)},i=()=>{c(null)},p=()=>{s(),c(null)},x=()=>{a(),c(null)};return e.jsxs(e.Fragment,{children:[e.jsxs(fe,{sx:{height:96,display:"flex",justifyContent:"space-between",p:f=>f.spacing(0,1,0,3)},children:[e.jsx(Ee,{value:n,onChange:t,placeholder:"Search Service Name...",startAdornment:e.jsx(Ne,{position:"start",children:e.jsx(g,{icon:"eva:search-fill",sx:{color:"text.disabled",width:20,height:20}})})}),e.jsx(v,{variant:"contained",color:"inherit",startIcon:e.jsx(g,{icon:"eva:plus-fill"}),onClick:r,children:"New Service"}),e.jsxs(v,{onClick:m,sx:{ml:2},variant:"contained",color:"secondary",children:[e.jsx(g,{icon:"eva:more-vertical-fill"}),"Export Data"]})]}),e.jsxs(M,{open:!!l,anchorEl:l,onClose:i,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:[e.jsx(b,{onClick:p,children:"PDF"}),e.jsx(b,{onClick:x,sx:{color:"error.main"},children:"EXCEL"})]})]})}$.propTypes={filterName:o.string,onFilterName:o.func,onNewHotel:o.func,pdfAction:o.func,excelAction:o.func};function qe(){const[n,t]=h.useState([]),[r,s]=h.useState(0),[a,l]=h.useState("desc"),[c,m]=h.useState("_id"),[i,p]=h.useState(""),[x,f]=h.useState(15),[X,y]=h.useState(!1),[_,E]=h.useState(null),[J,C]=h.useState(!1),[Q,V]=h.useState(""),[Y,T]=h.useState(""),Z=(d,u)=>{u!==""&&(l(c===u&&a==="asc"?"desc":"asc"),m(u))},ee=(d,u)=>{s(u)},ne=d=>{s(0),f(parseInt(d.target.value,10))},te=d=>{s(0),p(d.target.value)},N=He({inputData:n,comparator:Me(a,c),filterName:i});h.useEffect(()=>{(async()=>{try{const u=await ve();u===500?alert("Network Error"):(t(u.data),console.log(u.max_num),T(u.max_num))}catch(u){console.error("Error fetching data:",u),alert("An unexpected error occurred")}})()},[]);const re=()=>{E(null),y(!0)},ae=d=>{E(d),y(!0)},se=()=>{y(!1)},oe=async d=>{console.log(d);const S=await Se({newData:d});S===500?alert("Network Error"):(alert(_?"A data updated successfully":"A data added successfully"),t(S.data),T(S.max_num))},ie=d=>{V(d._id),C(!0)},le=async()=>{C(!1);const u=await be({id:Q});u===500?alert("Network Error."):(alert("A data deleted successfully."),t(u.data),T(u.max_num))},A=()=>{C(!1)},ce=()=>{ze(n)},de=()=>{We(n)},ue=!N.length&&!!i;return e.jsxs(Ie,{maxWidth:!1,children:[e.jsx(R,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(P,{variant:"h4",children:"Services"})}),e.jsxs(Oe,{children:[e.jsx($,{filterName:i,onFilterName:te,onNewHotel:re,pdfAction:ce,excelAction:de}),e.jsx(ge,{children:e.jsx(Te,{sx:{overflow:"auto",height:"76vh"},children:e.jsxs(ke,{sx:{minWidth:800},children:[e.jsx(U,{order:a,orderBy:c,onRequestSort:Z,headLabel:[{id:"service_id",label:"Service Id",align:"center"},{id:"name",label:"Service Name",align:"center"},{id:"",label:""}]}),e.jsxs(De,{children:[N.slice(r*x,r*x+x).map(d=>e.jsx(K,{id:d._id,name:d.name,service_id:d.service_id,deleteAction:()=>ie(d),editAction:()=>ae(d)},d._id)),e.jsx(G,{height:77,emptyRows:Re(r,x,n.length)}),ue&&e.jsx(q,{query:i})]})]})})}),e.jsx(Pe,{page:r,component:"div",count:n.length,rowsPerPage:x,onPageChange:ee,rowsPerPageOptions:[5,10,15,25,50,100],onRowsPerPageChange:ne})]}),e.jsx(B,{open:X,onClose:se,onSave:oe,initialData:_,maxNumber:Y}),e.jsxs(H,{open:J,onClose:A,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(W,{id:"alert-dialog-title",children:"Confirm Deletion"}),e.jsx(z,{children:e.jsx(_e,{id:"alert-dialog-description",children:"Are you sure you want to delete this item? This action cannot be undone."})}),e.jsxs(L,{children:[e.jsx(v,{onClick:A,color:"primary",children:"Cancel"}),e.jsx(v,{onClick:le,color:"error",autoFocus:!0,children:"Delete"})]})]})]})}function en(){return e.jsxs(e.Fragment,{children:[e.jsx(je,{children:e.jsx("title",{children:" Services "})}),e.jsx(qe,{})]})}export{en as default};
