import{r as p,j as e,S as ee,T as E,P as r,t as ze,I as Ge,e as z,f as te,M as $,B as He,s as Ke,w as $e,h as qe,W as Be}from"./index-260d8090.js";import{g as Je}from"./guid-f7fd5645.js";import{g as Ue}from"./hotel-09e2099a.js";import{g as Ye}from"./agency-e9982c8a.js";import{g as Xe}from"./service-e4ffadf5.js";import{g as Qe}from"./vehicle-4d480852.js";import{c as Ze,e as Ve,f as et}from"./resa-07403b23.js";import{L as G,A as H,D as K,d as O,u as tt}from"./utc-a53615bd.js";import{E as nt,D as ne,a as ae,b as ie,G as h,c as re,T as B,d as v,e as at,f as it,g as rt,h as lt,i as st,j as ot,k as ct}from"./jspdf.plugin.autotable-94d219d1.js";import{u as U,w as dt}from"./xlsx-f5126985.js";import{T as m}from"./InputAdornment-f7f0b194.js";import{A as R}from"./Autocomplete-4460ac0b.js";import{B as M}from"./Button-4dcb3975.js";import{C as ut}from"./Container-0d1ed83a.js";import{C as ht}from"./Card-2acce4ca.js";import"./axios-9b9683dd.js";import"./useThemeProps-476e28b6.js";import"./Menu-40da8ab7.js";import"./visuallyHidden-fa9934b5.js";import"./typeof-7fd5df1e.js";import"./usePreviousProps-bc4ce609.js";function le(a){const i=new Date(a);console.log(i);const c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],l=i.getDate(),n=c[i.getMonth()],g=i.getFullYear();return`${l}/${n}/${g}`}const q=a=>{if(!a)return"";const[i,c]=a.split(" ");let[l,n]=i.split(":");return c==="PM"&&l!=="12"&&(l=String(parseInt(l,10)+12)),c==="AM"&&l==="12"&&(l="00"),l=l.padStart(2,"0"),n=n.padStart(2,"0"),`${l}:${n}`},mt={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function pt(a,i,c){return a?Math.max(0,(1+a)*i-c):0}function Z(a,i,c){return a[c]===null?1:i[c]===null||i[c]<a[c]?-1:i[c]>a[c]?1:0}function gt(a,i){return a==="desc"?(c,l)=>Z(c,l,i):(c,l)=>-Z(c,l,i)}function xt({inputData:a,comparator:i,filterName:c}){const l=a.map((n,g)=>[n,g]);return l.sort((n,g)=>{const b=i(n[0],g[0]);return b!==0?b:n[1]-g[1]}),a=l.map(n=>n[0]),c&&(a=a.filter(n=>n.name.toLowerCase().indexOf(c.toLowerCase())!==-1)),a}const ft=a=>{a.sort((n,g)=>new Date(g.service_date)-new Date(n.service_date));const i=U.book_new(),c=[["Client Name","From","To","Service Type","Date Service","Arv / Dep","Flight No","Flight Time","Pick up Time","Agency","Adult","Driver","Guid","Remarks"],...a.map(n=>[n.client,n.from,n.hotel,n.service_type,le(n.service_date),n.arb_dep,n.flight_no,n.flight_time,n.pickup_time,n.agency,n.adult,n.driver,n.guid,n.resa_remark])],l=U.aoa_to_sheet(c);U.book_append_sheet(i,l,"Daily Planning"),dt(i,`daily_planning${Date.now()}.xlsx`)},vt=a=>{a.sort((n,g)=>new Date(g.service_date)-new Date(n.service_date));const i=new nt({orientation:"landscape",unit:"pt",format:[1500,600]}),c=[{header:"Client Name",dataKey:"client"},{header:"From",dataKey:"from"},{header:"To",dataKey:"hotel"},{header:"Service Type",dataKey:"service_type"},{header:"Date Service",dataKey:"service_date"},{header:"Arv / Dep",dataKey:"arb_dep"},{header:"Flight No",dataKey:"flight_no"},{header:"Flight Time",dataKey:"flight_time"},{header:"Pick up Time",dataKey:"pickup_time"},{header:"Agency",dataKey:"agency"},{header:"Adult",dataKey:"adult"},{header:"Driver",dataKey:"driver"},{header:"Guid",dataKey:"guid"},{header:"Remarks",dataKey:"remarks"}],l=a.map(n=>({client:n.client,from:n.from,hotel:n.hotel,service_type:n.service_type,service_date:le(n.service_date),arb_dep:n.arb_dep,flight_no:n.flight_no,flight_time:n.flight_time,pickup_time:n.pickup_time,agency:n.agency,adult:n.adult,driver:n.driver,guid:n.guid,remarks:n.resa_remark}));i.autoTable({head:[c.map(n=>n.header)],body:l.map(n=>c.map(g=>n[g.dataKey]))}),i.save(`daily_planning${Date.now()}.pdf`)},V={adult:"",adult_price:"",agency_ref_no:"",agency:null,arb_dep:"",pickup_time:"",child:"",child_price:"",client:"",cur:"",date:"",type_vehicle:"",dossier_no:"",effect_date:"",endofservice:"",flight_no:"",flight_time:"",from:null,hotel:null,htl_region:"",infant:"",invoce_on:"",resa_remark:"",service:null,service_date:"",service_detail:"",service_type:"",status:"",total_price:"",driver:"",guid:"",_id:""};function se({open:a,onClose:i,onSave:c,initialData:l,maxNumber:n,hotel:g,agency:b,service:D,vehicle:x,guid:P}){const[s,C]=p.useState(V);function I(t){const u=new Date(t);let y=u.getHours();const A=String(u.getMinutes()).padStart(2,"0"),N=y>=12?"PM":"AM";return y=y%12||12,`${String(y).padStart(2,"0")}:${A} ${N}`}p.useEffect(()=>{console.log(n),C(l?{...l,flight_time:q(l.flight_time),pickup_time:q(l.pickup_time),driver:l.driver?l.driver:"",guid:l.guid?l.guid:""}:{...V,dossier_no:n+1})},[l,n]);const d=t=>{const{name:u,value:y}=t.target;C({...s,[u]:y})},j=()=>{const t={...s};Object.entries(t).forEach(([u,y])=>{if(y instanceof Date){const A=new Date(y),W=-A.getTimezoneOffset()/60===2?new Date(A.getTime()+108e5).toString():y;t[u]=W}else{const A=Date.parse(`1970-01-01T${y}`);Number.isNaN(A)||(t[u]=I(A))}}),c(t),i()},k=b.map(t=>({label:t.name,value:t.name})),_=g.map(t=>({label:t.name,value:t.name})),w=D.map(t=>({label:t.name,value:t.name})),T=x.map(t=>({label:t.name,value:t.name})),F=P.map(t=>({label:t.name,value:t.name}));return e.jsxs(ne,{open:a,onClose:i,maxWidth:"xl",fullWidth:!0,children:[e.jsx(ae,{sx:{bgcolor:"primary.main",color:"white"},children:l?"Edit Reservation":"New Reservation"}),e.jsx(ie,{children:e.jsxs(ee,{spacing:3,children:[e.jsx(E,{variant:"h6",sx:{mt:2},children:"General Information"}),e.jsxs(h,{container:!0,spacing:2,children:[e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(m,{label:"Dossier No",name:"dossier_no",value:s.dossier_no,disabled:!0,onChange:d,fullWidth:!0,variant:"outlined"})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(m,{label:"Client",name:"client",value:s.client,onChange:d,fullWidth:!0,variant:"outlined"})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(m,{label:"Agency Reference no",name:"agency_ref_no",value:s.agency_ref_no,onChange:d,fullWidth:!0,variant:"outlined"})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(R,{options:k,getOptionLabel:t=>t.label,value:k.find(t=>t.value===s.agency)||null,onChange:(t,u)=>{d({target:{name:"agency",value:u?u.value:""}})},fullWidth:!0,renderInput:t=>e.jsx(m,{...t,label:"Agency",variant:"outlined"})})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(G,{dateAdapter:H,children:e.jsx(K,{label:"Service Date",name:"service_date",value:O(s.service_date),onChange:t=>C({...s,service_date:t?O(t).toDate():null}),renderInput:t=>e.jsx(m,{...t})})})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(G,{dateAdapter:H,children:e.jsx(K,{label:"End of Service",name:"endofservice",value:O(s.endofservice),onChange:t=>C({...s,endofservice:t?O(t).toDate():null}),renderInput:t=>e.jsx(m,{...t})})})})]}),e.jsx(E,{variant:"h6",sx:{mt:2},children:"Service Details"}),e.jsxs(h,{container:!0,spacing:2,children:[e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(R,{options:w,getOptionLabel:t=>t.label,value:w.find(t=>t.value===s.service)||null,onChange:(t,u)=>{d({target:{name:"service",value:u?u.value:""}})},fullWidth:!0,renderInput:t=>e.jsx(m,{...t,label:"Service",variant:"outlined"})})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(m,{label:"Service Type",name:"service_type",value:s.service_type,onChange:d,fullWidth:!0,variant:"outlined"})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(m,{label:"Arrival/Departure",name:"arb_dep",value:s.arb_dep,onChange:d,fullWidth:!0,variant:"outlined"})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(m,{label:"Flight No",name:"flight_no",value:s.flight_no,onChange:d,fullWidth:!0,variant:"outlined"})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(m,{label:"Flight Time",name:"flight_time",value:s.flight_time,onChange:d,fullWidth:!0,variant:"outlined",type:"time",InputLabelProps:{shrink:!0}})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(m,{label:"Pickup Time",name:"pickup_time",value:s.pickup_time,onChange:d,fullWidth:!0,variant:"outlined",type:"time",InputLabelProps:{shrink:!0}})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(R,{options:_,getOptionLabel:t=>t.label,value:_.find(t=>t.value===s.from)||null,onChange:(t,u)=>{d({target:{name:"from",value:u?u.value:""}})},fullWidth:!0,renderInput:t=>e.jsx(m,{...t,label:"From",variant:"outlined"})})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(R,{options:_,getOptionLabel:t=>t.label,value:_.find(t=>t.value===s.hotel)||null,onChange:(t,u)=>{d({target:{name:"hotel",value:u?u.value:""}})},fullWidth:!0,renderInput:t=>e.jsx(m,{...t,label:"Hotel",variant:"outlined"})})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(m,{label:"Hotel Region",name:"htl_region",value:s.htl_region,onChange:d,fullWidth:!0,variant:"outlined"})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(R,{options:T,getOptionLabel:t=>t.label,value:T.find(t=>t.value===s.type_vehicle)||null,onChange:(t,u)=>{d({target:{name:"type_vehicle",value:u?u.value:""}})},fullWidth:!0,renderInput:t=>e.jsx(m,{...t,label:"Type of Vehicle",variant:"outlined"})})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(m,{label:"Remarks",name:"resa_remark",value:s.resa_remark,onChange:d,fullWidth:!0,variant:"outlined",multiline:!0,rows:4})})]}),e.jsx(E,{variant:"h6",sx:{mt:2},children:"Pricing Information"}),e.jsxs(h,{container:!0,spacing:2,children:[e.jsx(h,{item:!0,xs:12,sm:3,children:e.jsx(m,{label:"Adult",name:"adult",value:s.adult,onChange:d,fullWidth:!0,variant:"outlined",type:"number"})}),e.jsx(h,{item:!0,xs:12,sm:3,children:e.jsx(m,{label:"Adult Price",name:"adult_price",value:s.adult_price,onChange:d,fullWidth:!0,variant:"outlined",type:"number"})}),e.jsx(h,{item:!0,xs:12,sm:3,children:e.jsx(m,{label:"Child",name:"child",value:s.child,onChange:d,fullWidth:!0,variant:"outlined",type:"number"})}),e.jsx(h,{item:!0,xs:12,sm:3,children:e.jsx(m,{label:"Child Price",name:"child_price",value:s.child_price,onChange:d,fullWidth:!0,variant:"outlined",type:"number"})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(m,{label:"Total Price",name:"total_price",value:s.total_price,onChange:d,fullWidth:!0,variant:"outlined",type:"number"})})]}),e.jsx(E,{variant:"h6",sx:{mt:2},children:"Additional Information"}),e.jsxs(h,{container:!0,spacing:2,children:[e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(m,{label:"Currency",name:"cur",value:s.cur,onChange:d,fullWidth:!0,variant:"outlined"})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(m,{label:"Invoice No",name:"inv_no",value:s.inv_no,onChange:d,fullWidth:!0,variant:"outlined"})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(G,{dateAdapter:H,children:e.jsx(K,{label:"Effect Date",name:"effect_date",value:O(s.effect_date),onChange:t=>C({...s,effect_date:t?O(t).toDate():null}),renderInput:t=>e.jsx(m,{...t})})})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(m,{label:"Status",name:"status",value:s.status,onChange:d,fullWidth:!0,variant:"outlined"})})]}),e.jsx(E,{variant:"h6",sx:{mt:2},children:"Driver Information"}),e.jsxs(h,{container:!0,spacing:2,children:[e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(m,{label:"Driver",name:"driver",value:s.driver,onChange:d,fullWidth:!0,variant:"outlined"})}),e.jsxs(h,{item:!0,xs:12,sm:6,children:[e.jsx(R,{options:F,getOptionLabel:t=>t.label,value:F.find(t=>t.value===s.guid)||null,onChange:(t,u)=>{d({target:{name:"guid",value:u?u.value:""}})},fullWidth:!0,renderInput:t=>e.jsx(m,{...t,label:"Guid",variant:"outlined"})}),e.jsx(m,{label:"Guid",name:"guid",value:s.guid,onChange:d,fullWidth:!0,variant:"outlined"})]})]})]})}),e.jsxs(re,{children:[e.jsx(M,{onClick:i,color:"inherit",children:"Cancel"}),e.jsx(M,{onClick:j,variant:"contained",children:"Save"})]})]})}se.propTypes={open:r.bool,onClose:r.func,onSave:r.func,initialData:r.object,maxNumber:r.any,hotel:r.any,agency:r.any,service:r.any,vehicle:r.any,guid:r.any};function oe({query:a}){return e.jsx(B,{children:e.jsx(v,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(ze,{sx:{textAlign:"center"},children:[e.jsx(E,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(E,{variant:"body2",children:["No results found for  ",e.jsxs("strong",{children:['"',a,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}oe.propTypes={query:r.string};function jt(a){const i=new Date(a),c=String(i.getDate()).padStart(2,"0"),l=String(i.getMonth()+1).padStart(2,"0");return`${i.getFullYear()}-${l}-${c}`}function ce({selected:a,id:i,client:c,from:l,hotel:n,service_type:g,service_date:b,arb_dep:D,flight_no:x,flight_time:P,pickup_time:s,agency:C,adult:I,driver:d,guid:j,remarks:k,editAction:_,deleteAction:w,type_vehicle:T,child:F}){const[t,u]=p.useState(null),y=J=>{u(J.currentTarget)},A=()=>{u(null)},N=()=>{_(),u(null)},W=()=>{w(),u(null)};return e.jsxs(e.Fragment,{children:[e.jsxs(B,{hover:!0,tabIndex:-1,role:"checkbox",selected:a,children:[e.jsx(v,{children:c}),e.jsx(v,{children:l}),e.jsx(v,{children:n}),e.jsx(v,{children:g}),e.jsx(v,{children:jt(b)}),e.jsx(v,{children:D}),e.jsx(v,{children:x}),e.jsx(v,{children:q(P)}),e.jsx(v,{children:q(s)}),e.jsx(v,{children:C}),e.jsx(v,{children:I}),e.jsx(v,{children:F}),e.jsx(v,{children:T}),e.jsx(v,{children:d}),e.jsx(v,{children:j}),e.jsx(v,{children:k}),e.jsx(v,{align:"right",children:e.jsx(Ge,{onClick:y,children:e.jsx(z,{icon:"eva:more-vertical-fill"})})})]}),e.jsxs(te,{open:!!t,anchorEl:t,onClose:A,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:[e.jsxs($,{onClick:N,children:[e.jsx(z,{icon:"eva:edit-fill",sx:{mr:2}}),"Edit"]}),e.jsxs($,{onClick:W,sx:{color:"error.main"},children:[e.jsx(z,{icon:"eva:trash-2-outline",sx:{mr:2}}),"Delete"]})]})]})}ce.propTypes={id:r.any,client:r.any,from:r.any,hotel:r.any,service_type:r.any,service_date:r.any,arb_dep:r.any,flight_no:r.any,flight_time:r.any,pickup_time:r.any,agency:r.any,adult:r.any,driver:r.any,guid:r.any,remarks:r.any,selected:r.any,type_vehicle:r.any,child:r.any,editAction:r.func,deleteAction:r.func};const yt=Ke(it)(({theme:a})=>({position:"sticky",top:0,backgroundColor:"#ddf4ff",zIndex:a.zIndex.appBar}));function de({order:a,orderBy:i,rowCount:c,headLabel:l,numSelected:n,onRequestSort:g,onSelectAllClick:b}){const D=x=>P=>{g(P,x)};return e.jsx(yt,{children:e.jsx(B,{children:l.map(x=>e.jsx(v,{align:x.align||"left",sortDirection:i===x.id?a:!1,sx:{width:x.width,minWidth:x.minWidth,backgroundColor:"#aaf4ff",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",padding:"4px",paddingTop:"10px",paddingBottom:"10px"},children:e.jsxs(at,{hideSortIcon:!0,active:i===x.id,direction:i===x.id?a:"asc",onClick:D(x.id),children:[x.label,i===x.id?e.jsx(He,{sx:{...mt},children:a==="desc"?"sorted descending":"sorted ascending"}):null]})},x.id))})})}de.propTypes={order:r.oneOf(["asc","desc"]),orderBy:r.string,rowCount:r.number,headLabel:r.array,numSelected:r.number,onRequestSort:r.func,onSelectAllClick:r.func};function ue({emptyRows:a,height:i}){return a?e.jsx(B,{sx:{...i&&{height:i*a}},children:e.jsx(v,{colSpan:9})}):null}ue.propTypes={emptyRows:r.number,height:r.number};O.extend(tt);function he({onGetDate:a,onGetEndDate:i,NewAction:c,pdfAction:l,excelAction:n,loading:g}){const[b,D]=p.useState(null),x=j=>{const k=O(j).toDate();a(k)},P=j=>{const k=O(j).toDate();i(k)},s=j=>{D(j.currentTarget)},C=()=>{D(null)},I=()=>{l(),D(null)},d=()=>{n(),D(null)};return e.jsxs(e.Fragment,{children:[e.jsxs($e,{sx:{height:96,display:"flex",justifyContent:"space-between",p:j=>j.spacing(0,1,0,3),color:"primary.main",bgcolor:"#aaf4ff"},children:[e.jsx(G,{dateAdapter:H,children:e.jsx(K,{label:"Select Start Date",onChange:x,renderInput:j=>e.jsx(m,{...j})})}),e.jsx(G,{dateAdapter:H,sx:{ml:4},children:e.jsx(K,{sx:{ml:4},label:"Select End Date",onChange:P,renderInput:j=>e.jsx(m,{...j})})}),e.jsxs(e.Fragment,{children:[e.jsxs(M,{variant:"contained",onClick:c,color:"inherit",startIcon:e.jsx(z,{icon:"eva:plus-fill"}),disabled:g,children:[g?"Loading Data...":"New Daily Data"," "]}),e.jsxs(M,{onClick:s,sx:{ml:2},variant:"contained",color:"secondary",children:[e.jsx(z,{icon:"eva:more-vertical-fill"}),"Export Data"]})]})]}),e.jsxs(te,{open:!!b,anchorEl:b,onClose:C,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:[e.jsx($,{onClick:I,children:"PDF"}),e.jsx($,{onClick:d,sx:{color:"error.main"},children:"EXCEL"})]})]})}he.propTypes={onGetDate:r.func,onGetEndDate:r.func,NewAction:r.func,pdfAction:r.func,excelAction:r.func,loading:r.any};function bt(){const[a,i]=p.useState([]),[c,l]=p.useState(0),[n,g]=p.useState("desc"),[b,D]=p.useState("_id"),[x,P]=p.useState(""),[s,C]=p.useState(15),[I,d]=p.useState(!1),[j,k]=p.useState(null),[_,w]=p.useState(null),[T,F]=p.useState(null),[t,u]=p.useState(!1),[y,A]=p.useState(""),[N,W]=p.useState(""),[J,me]=p.useState([]),[pe,ge]=p.useState([]),[xe,fe]=p.useState([]),[ve,je]=p.useState([]),[ye,be]=p.useState([]),[_e,Y]=p.useState(!1),De=(o,f)=>{f!==""&&(g(b===f&&n==="asc"?"desc":"asc"),D(f))};p.useEffect(()=>{(async()=>{try{Y(!0);const f=await Ue(),S=await Ye(),L=await Xe(),Me=await Qe(),Le=await Je();me(f.data),ge(S.data),je(L.data),fe(Me.data),be(Le.data)}catch{alert("network Error. Refresh page")}finally{Y(!1)}})()},[]);const Ce=(o,f)=>{l(f)},Se=o=>{l(0),C(parseInt(o.target.value,10))},ke=o=>{l(0),P(o.target.value)},X=xt({inputData:a,comparator:gt(n,b),filterName:x}),Te=async o=>{const f=new Date(o),L=-f.getTimezoneOffset()/60===2?new Date(f.getTime()+108e5).toString():o;w(L)},Ae=async o=>{const f=new Date(o),L=-f.getTimezoneOffset()/60===2?new Date(f.getTime()+108e5).toString():o;F(L)};p.useEffect(()=>{(async()=>{if(!(!_||!T)){if(_>T){alert("Input currece Date!");return}l(0);try{const S=await Ze({start:_,end:T});S===500?alert("Network Error"):(i(S.data),W(S.max_num))}catch(f){console.error("Error fetching data:",f),alert("An unexpected error occurred")}}})()},[_,T]);const Pe=()=>{k(null),d(!0)},Oe=o=>{k(o),d(!0)},Ee=()=>{d(!1)},Ie=async o=>{const S=await Ve({start:_,end:T,newData:o});S===500?alert("Network Error"):(alert(j?"A data updated successfully":"A data added successfully"),i(S.data),W(S.max_num))},We=o=>{A(o._id),u(!0)},we=async()=>{u(!1);const f=await et({start:_,end:T,id:y});f===500?alert("Network Error."):(alert("A data deleted successfully."),i(f.data),W(f.max_num))},Q=()=>{u(!1)},Fe=()=>{vt(a)},Ne=()=>{ft(a)},Re=!X.length&&!!x;return e.jsxs(ut,{maxWidth:!1,children:[e.jsx(ee,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(E,{variant:"h4",children:"Daily Planning"})}),e.jsxs(ht,{children:[e.jsx(he,{filterName:x,onFilterName:ke,onGetDate:Te,onGetEndDate:Ae,NewAction:Pe,pdfAction:Fe,excelAction:Ne,loading:_e}),e.jsx(qe,{children:e.jsx(rt,{sx:{overflow:"auto",height:"76vh"},children:e.jsxs(lt,{sx:{minWidth:800},children:[e.jsx(de,{order:n,orderBy:b,onRequestSort:De,headLabel:[{id:"client",label:"Client Name"},{id:"from",label:"From"},{id:"hotel",label:"To"},{id:"service_type",label:"Service Type"},{id:"service_date",label:"Date Service"},{id:"arb_dep",label:"Arv / Dep"},{id:"flight_no",label:"Flight No"},{id:"flight_time",label:"flgt Time"},{id:"pickup_time",label:"Pick up Time"},{id:"agency",label:"Agency",align:"center"},{id:"adult",label:"Adult"},{id:"child",label:"Child"},{id:"type_vehicle",label:"Vehicle Type"},{id:"driver",label:"Driver"},{id:"guid",label:"Guid"},{id:"remarks",label:"Remarks"},{id:"",label:""}]}),e.jsxs(st,{children:[X.slice(c*s,c*s+s).map(o=>e.jsx(ce,{id:o._id,client:o.client,from:o.from,hotel:o.hotel,service_type:o.service_type,service_date:o.service_date,arb_dep:o.arb_dep,flight_no:o.flight_no,flight_time:o.flight_time,pickup_time:o.pickup_time,agency:o.agency,adult:o.adult,type_vehicle:o.type_vehicle,child:o.child,driver:o.driver,guid:o.guid,remarks:o.resa_remark,deleteAction:()=>We(o),editAction:()=>Oe(o)},o._id)),e.jsx(ue,{height:77,emptyRows:pt(c,s,a.length)}),Re&&e.jsx(oe,{query:x})]})]})})}),e.jsx(ot,{page:c,component:"div",count:a.length,rowsPerPage:s,onPageChange:Ce,rowsPerPageOptions:[5,10,15,25,50,100],onRowsPerPageChange:Se})]}),e.jsx(se,{open:I,onClose:Ee,onSave:Ie,initialData:j,maxNumber:N,hotel:J,agency:pe,service:ve,vehicle:xe,guid:ye}),e.jsxs(ne,{open:t,onClose:Q,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(ae,{id:"alert-dialog-title",children:"Confirm Deletion"}),e.jsx(ie,{children:e.jsx(ct,{id:"alert-dialog-description",children:"Are you sure you want to delete this item? This action cannot be undone."})}),e.jsxs(re,{children:[e.jsx(M,{onClick:Q,color:"primary",children:"Cancel"}),e.jsx(M,{onClick:we,color:"error",autoFocus:!0,children:"Delete"})]})]})]})}function Kt(){return e.jsxs(e.Fragment,{children:[e.jsx(Be,{children:e.jsx("title",{children:" Daily Planning "})}),e.jsx(bt,{})]})}export{Kt as default};
