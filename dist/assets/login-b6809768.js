import{a7 as T,r as k,a as U,g as z,a8 as A,s as C,i as x,_ as i,a9 as _,u as q,b as W,j as n,c as G,d as F,aa as $,o as K,B as V,ab as J,l as O,S as L,T as Z,D as H,I as Q,e as X,W as Y}from"./index-260d8090.js";import{a as N}from"./axios-9b9683dd.js";import{u as tt}from"./userStroe-d75e55aa.js";import{C as ot}from"./Card-2acce4ca.js";import{T as B,I as et}from"./InputAdornment-f7f0b194.js";import{B as rt}from"./Button-4dcb3975.js";import{u as nt}from"./useThemeProps-476e28b6.js";import{u as st}from"./Menu-40da8ab7.js";function at(){const o=T();return k.useMemo(()=>({back:()=>o(-1),forward:()=>o(1),reload:()=>window.location.reload(),push:e=>o(e),replace:e=>o(e,{replace:!0})}),[o])}function it(o){return U("MuiCircularProgress",o)}z("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const ct=["className","color","disableShrink","size","style","thickness","value","variant"];let j=o=>o,E,R,D,M;const m=44,dt=A(E||(E=j`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),lt=A(R||(R=j`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),ut=o=>{const{classes:t,variant:e,color:r,disableShrink:s}=o,a={root:["root",e,`color${x(r)}`],svg:["svg"],circle:["circle",`circle${x(e)}`,s&&"circleDisableShrink"]};return F(a,it,t)},gt=C("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(o,t)=>{const{ownerState:e}=o;return[t.root,t[e.variant],t[`color${x(e.color)}`]]}})(({ownerState:o,theme:t})=>i({display:"inline-block"},o.variant==="determinate"&&{transition:t.transitions.create("transform")},o.color!=="inherit"&&{color:(t.vars||t).palette[o.color].main}),({ownerState:o})=>o.variant==="indeterminate"&&_(D||(D=j`
      animation: ${0} 1.4s linear infinite;
    `),dt)),pt=C("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(o,t)=>t.svg})({display:"block"}),ht=C("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(o,t)=>{const{ownerState:e}=o;return[t.circle,t[`circle${x(e.variant)}`],e.disableShrink&&t.circleDisableShrink]}})(({ownerState:o,theme:t})=>i({stroke:"currentColor"},o.variant==="determinate"&&{transition:t.transitions.create("stroke-dashoffset")},o.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:o})=>o.variant==="indeterminate"&&!o.disableShrink&&_(M||(M=j`
      animation: ${0} 1.4s ease-in-out infinite;
    `),lt)),ft=k.forwardRef(function(t,e){const r=q({props:t,name:"MuiCircularProgress"}),{className:s,color:a="primary",disableShrink:v=!1,size:c=40,style:g,thickness:p=3.6,value:h=0,variant:I="indeterminate"}=r,d=W(r,ct),f=i({},r,{color:a,disableShrink:v,size:c,thickness:p,value:h,variant:I}),l=ut(f),y={},b={},w={};if(I==="determinate"){const S=2*Math.PI*((m-p)/2);y.strokeDasharray=S.toFixed(3),w["aria-valuenow"]=Math.round(h),y.strokeDashoffset=`${((100-h)/100*S).toFixed(3)}px`,b.transform="rotate(-90deg)"}return n.jsx(gt,i({className:G(l.root,s),style:i({width:c,height:c},b,g),ownerState:f,ref:e,role:"progressbar"},w,d,{children:n.jsx(pt,{className:l.svg,ownerState:f,viewBox:`${m/2} ${m/2} ${m} ${m}`,children:n.jsx(ht,{className:l.circle,style:y,ownerState:f,cx:m,cy:m,r:(m-p)/2,fill:"none",strokeWidth:p})})}))}),mt=ft;function xt(o){return U("MuiLoadingButton",o)}const vt=z("MuiLoadingButton",["root","loading","loadingIndicator","loadingIndicatorCenter","loadingIndicatorStart","loadingIndicatorEnd","endIconLoadingEnd","startIconLoadingStart"]),u=vt,It=["children","disabled","id","loading","loadingIndicator","loadingPosition","variant"],yt=o=>{const{loading:t,loadingPosition:e,classes:r}=o,s={root:["root",t&&"loading"],startIcon:[t&&`startIconLoading${x(e)}`],endIcon:[t&&`endIconLoading${x(e)}`],loadingIndicator:["loadingIndicator",t&&`loadingIndicator${x(e)}`]},a=F(s,xt,r);return i({},r,a)},kt=o=>o!=="ownerState"&&o!=="theme"&&o!=="sx"&&o!=="as"&&o!=="classes",bt=C(rt,{shouldForwardProp:o=>kt(o)||o==="classes",name:"MuiLoadingButton",slot:"Root",overridesResolver:(o,t)=>[t.root,t.startIconLoadingStart&&{[`& .${u.startIconLoadingStart}`]:t.startIconLoadingStart},t.endIconLoadingEnd&&{[`& .${u.endIconLoadingEnd}`]:t.endIconLoadingEnd}]})(({ownerState:o,theme:t})=>i({[`& .${u.startIconLoadingStart}, & .${u.endIconLoadingEnd}`]:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},o.loadingPosition==="center"&&{transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),[`&.${u.loading}`]:{color:"transparent"}},o.loadingPosition==="start"&&o.fullWidth&&{[`& .${u.startIconLoadingStart}, & .${u.endIconLoadingEnd}`]:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0,marginRight:-8}},o.loadingPosition==="end"&&o.fullWidth&&{[`& .${u.startIconLoadingStart}, & .${u.endIconLoadingEnd}`]:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0,marginLeft:-8}})),Pt=C("span",{name:"MuiLoadingButton",slot:"LoadingIndicator",overridesResolver:(o,t)=>{const{ownerState:e}=o;return[t.loadingIndicator,t[`loadingIndicator${x(e.loadingPosition)}`]]}})(({theme:o,ownerState:t})=>i({position:"absolute",visibility:"visible",display:"flex"},t.loadingPosition==="start"&&(t.variant==="outlined"||t.variant==="contained")&&{left:t.size==="small"?10:14},t.loadingPosition==="start"&&t.variant==="text"&&{left:6},t.loadingPosition==="center"&&{left:"50%",transform:"translate(-50%)",color:(o.vars||o).palette.action.disabled},t.loadingPosition==="end"&&(t.variant==="outlined"||t.variant==="contained")&&{right:t.size==="small"?10:14},t.loadingPosition==="end"&&t.variant==="text"&&{right:6},t.loadingPosition==="start"&&t.fullWidth&&{position:"relative",left:-10},t.loadingPosition==="end"&&t.fullWidth&&{position:"relative",right:-10})),Ct=k.forwardRef(function(t,e){const r=nt({props:t,name:"MuiLoadingButton"}),{children:s,disabled:a=!1,id:v,loading:c=!1,loadingIndicator:g,loadingPosition:p="center",variant:h="text"}=r,I=W(r,It),d=st(v),f=g??n.jsx(mt,{"aria-labelledby":d,color:"inherit",size:16}),l=i({},r,{disabled:a,loading:c,loadingIndicator:f,loadingPosition:p,variant:h}),y=yt(l),b=c?n.jsx(Pt,{className:y.loadingIndicator,ownerState:l,children:f}):null;return n.jsxs(bt,i({disabled:a||c,id:d,ref:e},I,{variant:h,classes:y,ownerState:l,children:[l.loadingPosition==="end"?s:b,l.loadingPosition==="end"?b:s]}))}),Lt=Ct;class P extends Error{}P.prototype.name="InvalidTokenError";function jt(o){return decodeURIComponent(atob(o).replace(/(.)/g,(t,e)=>{let r=e.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function $t(o){let t=o.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return jt(t)}catch{return atob(t)}}function wt(o,t){if(typeof o!="string")throw new P("Invalid token specified: must be a string");t||(t={});const e=t.header===!0?0:1,r=o.split(".")[e];if(typeof r!="string")throw new P(`Invalid token specified: missing part #${e+1}`);let s;try{s=$t(r)}catch(a){throw new P(`Invalid token specified: invalid base64 for part #${e+1} (${a.message})`)}try{return JSON.parse(s)}catch(a){throw new P(`Invalid token specified: invalid json for part #${e+1} (${a.message})`)}}const St=()=>{const o=$.get("token");let t;if(!o)t={isAuth:!1};else{const e=wt(o);e.exp*1e3<Date.now()?t={isAuth:!1}:t={isAuth:!0,...e.user}}return t},Bt=N.create({baseURL:"/api",withCredentials:!0});Bt.interceptors.request.use(o=>{const t=$.get("token");return t&&(o.headers.Authorization=`${t}`),o},o=>Promise.reject(o));const Et="http://escapadezanzibar.exclusive-technology.net:3000",Rt=async o=>{var t,e;try{const r=await N.post(`${Et}/api/auth/signin`,o);return $.set("token",r.data.token,{expires:7,secure:!0,sameSite:"strict"}),200}catch(r){return console.error("Sign In Error:",((t=r.response)==null?void 0:t.data)||r.message),((e=r.response)==null?void 0:e.data)||{error:"An error occurred during sign in"}}};function Dt(){const o=K(),t=at(),{setUser:e}=tt(),r=St(),[s,a]=k.useState(""),[v,c]=k.useState(""),[g,p]=k.useState(!1),h=async()=>{await Rt({email:s,password:v})===200&&(e({...r,isAuth:!0}),t.push("/"))},I=n.jsxs(n.Fragment,{children:[n.jsxs(L,{spacing:3,children:[n.jsx(B,{name:"email",label:"Email address",value:s,onChange:d=>a(d.target.value)}),n.jsx(B,{name:"password",label:"Password",type:g?"text":"password",value:v,onChange:d=>c(d.target.value),InputProps:{endAdornment:n.jsx(et,{position:"end",children:n.jsx(Q,{onClick:()=>p(!g),edge:"end",children:n.jsx(X,{icon:g?"eva:eye-fill":"eva:eye-off-fill"})})})}})]}),n.jsx(L,{direction:"row",alignItems:"center",justifyContent:"flex-end",sx:{my:3}}),n.jsx(Lt,{fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"inherit",onClick:h,children:"Login"})]});return n.jsxs(V,{sx:{...J({color:O(o.palette.background.default,.9),imgUrl:"/assets/background/overlay_4.jpg"}),height:1},children:[n.jsx("img",{src:"/assets/logo.png",alt:"logo",style:{position:"fixed",top:{xs:16,md:24},left:{xs:16,md:24}}}),n.jsx(L,{alignItems:"center",justifyContent:"center",sx:{height:1},children:n.jsxs(ot,{sx:{p:5,width:1,maxWidth:700,text:"center"},children:[n.jsx(Z,{variant:"h4",alignItems:"center",justifyContent:"center",children:"Sign in to Escapadezanzibar Booking management"}),n.jsx(L,{direction:"row",spacing:2}),n.jsx(H,{sx:{my:3}}),I]})})]})}function Tt(){return n.jsxs(n.Fragment,{children:[n.jsx(Y,{children:n.jsx("title",{children:" Login "})}),n.jsx(Dt,{})]})}export{Tt as default};
