import{r as h,j as e,S as F,P as r,t as he,T as D,I as pe,e as f,f as R,M as y,B as xe,s as me,w as ge,h as fe,W as je}from"./index-260d8090.js";import{g as be,p as we,d as ye}from"./guid-f7fd5645.js";import{D as M,a as H,b as W,G as k,c as z,T as v,d as j,E as ve,e as Ce,f as Se,g as Te,h as ke,i as Pe,j as De,k as _e}from"./jspdf.plugin.autotable-94d219d1.js";import{T as N,O as Ee,I as Ae}from"./InputAdornment-f7f0b194.js";import{B as b}from"./Button-4dcb3975.js";import{u as P,w as Ie}from"./xlsx-f5126985.js";import{C as Ne}from"./Container-0d1ed83a.js";import{C as Oe}from"./Card-2acce4ca.js";import"./axios-9b9683dd.js";import"./Menu-40da8ab7.js";import"./typeof-7fd5df1e.js";const O={guid_id:"",name:"",_id:""};function L({open:n,onClose:t,onSave:a,initialData:s,maxNumber:o}){const[l,c]=h.useState(O);h.useEffect(()=>{console.log(o),c(s?{...s}:{...O,guid_id:o+1})},[s,o]);const m=p=>{const{name:x,value:g}=p.target;c({...l,[x]:g})},i=()=>{const p={...l};a(p),t()};return e.jsxs(M,{open:n,onClose:t,fullWidth:!0,children:[e.jsx(H,{sx:{bgcolor:"primary.main",color:"white"},children:s?"Edit Hotel":"New Hotel"}),e.jsx(W,{children:e.jsx(F,{spacing:3,children:e.jsxs(k,{container:!0,spacing:2,children:[e.jsx(k,{item:!0,xs:12,sm:12,children:e.jsx(N,{label:"Service No",name:"guid_id",value:l.guid_id,onChange:m,type:"number",fullWidth:!0,variant:"outlined"})}),e.jsx(k,{item:!0,xs:12,sm:12,children:e.jsx(N,{label:"Service Name",name:"name",value:l.name,onChange:m,fullWidth:!0,variant:"outlined"})})]})})}),e.jsxs(z,{children:[e.jsx(b,{onClick:t,color:"inherit",children:"Cancel"}),e.jsx(b,{onClick:i,variant:"contained",children:"Save"})]})]})}L.propTypes={open:r.bool,onClose:r.func,onSave:r.func,initialData:r.object,maxNumber:r.any};function q({query:n}){return e.jsx(v,{children:e.jsx(j,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(he,{sx:{textAlign:"center"},children:[e.jsx(D,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(D,{variant:"body2",children:["No results found for Â ",e.jsxs("strong",{children:['"',n,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}q.propTypes={query:r.string};function B({id:n,name:t,guid_id:a,editAction:s,deleteAction:o}){const[l,c]=h.useState(null),m=g=>{c(g.currentTarget)},i=()=>{c(null)},p=()=>{s(),c(null)},x=()=>{o(),c(null)};return e.jsxs(e.Fragment,{children:[e.jsxs(v,{hover:!0,tabIndex:-1,role:"checkbox",children:[e.jsx(j,{align:"center",children:a}),e.jsx(j,{align:"center",children:t}),e.jsx(j,{align:"right",children:e.jsx(pe,{onClick:m,children:e.jsx(f,{icon:"eva:more-vertical-fill"})})})]}),e.jsxs(R,{open:!!l,anchorEl:l,onClose:i,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:[e.jsxs(y,{onClick:p,children:[e.jsx(f,{icon:"eva:edit-fill",sx:{mr:2}}),"Edit"]}),e.jsxs(y,{onClick:x,sx:{color:"error.main"},children:[e.jsx(f,{icon:"eva:trash-2-outline",sx:{mr:2}}),"Delete"]})]})]})}B.propTypes={id:r.any,guid_id:r.any,name:r.any,editAction:r.func,deleteAction:r.func};const Ge={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function Fe(n,t,a){return n?Math.max(0,(1+n)*t-a):0}function G(n,t,a){return n[a]===null?1:t[a]===null||t[a]<n[a]?-1:t[a]>n[a]?1:0}function Re(n,t){return n==="desc"?(a,s)=>G(a,s,t):(a,s)=>-G(a,s,t)}function Me({inputData:n,comparator:t,filterName:a}){const s=n.map((o,l)=>[o,l]);return s.sort((o,l)=>{const c=t(o[0],l[0]);return c!==0?c:o[1]-l[1]}),n=s.map(o=>o[0]),a&&(n=n.filter(o=>o.name.toLowerCase().indexOf(a.toLowerCase())!==-1)),n}const He=n=>{const t=P.book_new(),a=[["Guid Id","Guid"],...n.map(o=>[o.guid_id,o.name])],s=P.aoa_to_sheet(a);P.book_append_sheet(t,s,"guid"),Ie(t,`guid${Date.now()}.xlsx`)},We=n=>{const t=new ve({unit:"pt",format:[1500,600]}),a=[{header:"Guid Id",dataKey:"guid_id"},{header:"Guid",dataKey:"name"}],s=n.map(o=>({guid_id:o.guid_id,name:o.name}));t.autoTable({head:[a.map(o=>o.header)],body:s.map(o=>a.map(l=>o[l.dataKey]))}),t.save(`guid${Date.now()}.pdf`)},ze=me(Se)(({theme:n})=>({position:"sticky",top:0,backgroundColor:"#ddf4ff",zIndex:n.zIndex.appBar}));function K({order:n,orderBy:t,rowCount:a,headLabel:s,numSelected:o,onRequestSort:l,onSelectAllClick:c}){const m=i=>p=>{l(p,i)};return e.jsx(ze,{children:e.jsx(v,{children:s.map(i=>e.jsx(j,{align:i.align||"left",sortDirection:t===i.id?n:!1,sx:{width:i.width,minWidth:i.minWidth,backgroundColor:"#aaf4ff",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",padding:"4px",paddingTop:"10px",paddingBottom:"10px"},children:e.jsxs(Ce,{hideSortIcon:!0,active:t===i.id,direction:t===i.id?n:"asc",onClick:m(i.id),children:[i.label,t===i.id?e.jsx(xe,{sx:{...Ge},children:n==="desc"?"sorted descending":"sorted ascending"}):null]})},i.id))})})}K.propTypes={order:r.oneOf(["asc","desc"]),orderBy:r.string,rowCount:r.number,headLabel:r.array,numSelected:r.number,onRequestSort:r.func,onSelectAllClick:r.func};function U({emptyRows:n,height:t}){return n?e.jsx(v,{sx:{...t&&{height:t*n}},children:e.jsx(j,{colSpan:9})}):null}U.propTypes={emptyRows:r.number,height:r.number};function $({filterName:n,onFilterName:t,onNewHotel:a,pdfAction:s,excelAction:o}){const[l,c]=h.useState(null),m=g=>{c(g.currentTarget)},i=()=>{c(null)},p=()=>{s(),c(null)},x=()=>{o(),c(null)};return e.jsxs(e.Fragment,{children:[e.jsxs(ge,{sx:{height:96,display:"flex",justifyContent:"space-between",p:g=>g.spacing(0,1,0,3)},children:[e.jsx(Ee,{value:n,onChange:t,placeholder:"Search Vehicle Type...",startAdornment:e.jsx(Ae,{position:"start",children:e.jsx(f,{icon:"eva:search-fill",sx:{color:"text.disabled",width:20,height:20}})})}),e.jsx(b,{variant:"contained",color:"inherit",startIcon:e.jsx(f,{icon:"eva:plus-fill"}),onClick:a,children:"New Guid"}),e.jsxs(b,{onClick:m,sx:{ml:2},variant:"contained",color:"secondary",children:[e.jsx(f,{icon:"eva:more-vertical-fill"}),"Export Data"]})]}),e.jsxs(R,{open:!!l,anchorEl:l,onClose:i,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:[e.jsx(y,{onClick:p,children:"PDF"}),e.jsx(y,{onClick:x,sx:{color:"error.main"},children:"EXCEL"})]})]})}$.propTypes={filterName:r.string,onFilterName:r.func,onNewHotel:r.func,pdfAction:r.func,excelAction:r.func};function Le(){const[n,t]=h.useState([]),[a,s]=h.useState(0),[o,l]=h.useState("desc"),[c,m]=h.useState("_id"),[i,p]=h.useState(""),[x,g]=h.useState(15),[V,C]=h.useState(!1),[_,E]=h.useState(null),[X,S]=h.useState(!1),[J,Q]=h.useState(""),[Y,T]=h.useState(""),Z=(d,u)=>{u!==""&&(l(c===u&&o==="asc"?"desc":"asc"),m(u))},ee=(d,u)=>{s(u)},ne=d=>{s(0),g(parseInt(d.target.value,10))},te=d=>{s(0),p(d.target.value)},A=Me({inputData:n,comparator:Re(o,c),filterName:i});h.useEffect(()=>{(async()=>{try{const u=await be();u===500?alert("Network Error"):(t(u.data),console.log(u.max_num),T(u.max_num))}catch(u){console.error("Error fetching data:",u),alert("An unexpected error occurred")}})()},[]);const ae=()=>{E(null),C(!0)},oe=d=>{E(d),C(!0)},se=()=>{C(!1)},re=async d=>{console.log(d);const w=await we({newData:d});w===500?alert("Network Error"):(alert(_?"A data updated successfully":"A data added successfully"),t(w.data),T(w.max_num))},ie=d=>{Q(d._id),S(!0)},le=async()=>{S(!1);const u=await ye({id:J});u===500?alert("Network Error."):(alert("A data deleted successfully."),t(u.data),T(u.max_num))},I=()=>{S(!1)},ce=()=>{We(n)},de=()=>{He(n)},ue=!A.length&&!!i;return e.jsxs(Ne,{maxWidth:!1,children:[e.jsx(F,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(D,{variant:"h4",children:"Guids"})}),e.jsxs(Oe,{children:[e.jsx($,{filterName:i,onFilterName:te,onNewHotel:ae,pdfAction:ce,excelAction:de}),e.jsx(fe,{children:e.jsx(Te,{sx:{overflow:"auto",height:"76vh"},children:e.jsxs(ke,{sx:{minWidth:800},children:[e.jsx(K,{order:o,orderBy:c,onRequestSort:Z,headLabel:[{id:"guid_id",label:"Guid Id",align:"center"},{id:"name",label:"Guid Type",align:"center"},{id:"",label:""}]}),e.jsxs(Pe,{children:[A.slice(a*x,a*x+x).map(d=>e.jsx(B,{id:d._id,name:d.name,guid_id:d.guid_id,deleteAction:()=>ie(d),editAction:()=>oe(d)},d._id)),e.jsx(U,{height:77,emptyRows:Fe(a,x,n.length)}),ue&&e.jsx(q,{query:i})]})]})})}),e.jsx(De,{page:a,component:"div",count:n.length,rowsPerPage:x,onPageChange:ee,rowsPerPageOptions:[5,10,15,25,50,100],onRowsPerPageChange:ne})]}),e.jsx(L,{open:V,onClose:se,onSave:re,initialData:_,maxNumber:Y}),e.jsxs(M,{open:X,onClose:I,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(H,{id:"alert-dialog-title",children:"Confirm Deletion"}),e.jsx(W,{children:e.jsx(_e,{id:"alert-dialog-description",children:"Are you sure you want to delete this item? This action cannot be undone."})}),e.jsxs(z,{children:[e.jsx(b,{onClick:I,color:"primary",children:"Cancel"}),e.jsx(b,{onClick:le,color:"error",autoFocus:!0,children:"Delete"})]})]})]})}function en(){return e.jsxs(e.Fragment,{children:[e.jsx(je,{children:e.jsx("title",{children:" Guids "})}),e.jsx(Le,{})]})}export{en as default};
